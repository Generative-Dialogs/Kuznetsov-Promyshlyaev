<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master" xml:lang="ru">
<title>Класс src.GameMaster.GameMaster.GameMaster</title>
<indexterm><primary>src.GameMaster.GameMaster.GameMaster</primary></indexterm>
<para>

<para>Класс, управляющий игровым процессом и взаимодействием с игроком </para>
 
</para>
<simplesect>
    <title>Открытые члены    </title>
        <itemizedlist>
            <listitem><para>None <link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1a3d4c57cdc4cd784782f1fdb024610892">__init__</link> (self, int session_id, Optional[str] world_description=None, Optional[str] player_description=None, bool fast_flg=True, str language=&quot;English&quot;, bool generate_character_images=True)</para>

<para>Инициализация мастера игры </para>
</listitem>
            <listitem><para>str <link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1ada31cf2e334f400a557e5cef5cfd4035">generate_answer</link> (self, str message)</para>

<para>Генерация ответа на сообщение игрока </para>
</listitem>
            <listitem><para>Tuple[List[<link linkend="_classsrc_1_1_game_master_1_1_command_data_1_1_command_data">CommandData</link>], str] <link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1af4b0a20324399ffd65811c0d5a7e72fb">generate_instruction</link> (self, str message)</para>

<para>Генерация инструкций на основе сообщения </para>
</listitem>
            <listitem><para>Tuple[Optional[List[<link linkend="_classsrc_1_1_game_master_1_1_command_data_1_1_command_data">CommandData</link>]], str] <link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1aa80e8c47e27990d55aeb45ddf7512f05">validate_and_parse</link> (self, str input_text)</para>

<para>Валидация и парсинг входного текста </para>
</listitem>
            <listitem><para>Tuple[str, Set[str]] <link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1a7f51c99f6a3adafdebc200086a1e71f2">parse_commands</link> (self, List[<link linkend="_classsrc_1_1_game_master_1_1_command_data_1_1_command_data">CommandData</link>] commands)</para>

<para>Обработка списка команд </para>
</listitem>
        </itemizedlist>
</simplesect>
<simplesect>
    <title>Открытые атрибуты    </title>
        <itemizedlist>
            <listitem><para><link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1a163bdf238c24c30500cb4d758cd25b31">session_id</link> = session_id</para>
</listitem>
            <listitem><para><link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1a7fcc819f6b191473b29534ab67576211">db</link> = <link linkend="_classsrc_1_1_database_manager_1_1_database_manager_1_1_database_manager">DatabaseManager</link>()</para>
</listitem>
            <listitem><para><link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1ab19b9e393d293c94e4643cd32c67d0dd">generate_character_images</link> = generate_character_images</para>
</listitem>
            <listitem><para><link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1aaebaf89191e3696ae060994b3cbd85bd">world_description</link> = world_description</para>
</listitem>
            <listitem><para><link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1a0bb1f23554cf5091cf4bffb1641d9be6">player_description</link> = player_description</para>
</listitem>
            <listitem><para><link linkend="_classsrc_1_1_message_generator_1_1_protocol_message_generator_1_1_protocol_message_generator">ProtocolMessageGenerator</link> <link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1aedb06b2bcc0533a886a217a19735151d">messageGenerator</link> = <link linkend="_classsrc_1_1_message_generator_1_1_message_generator_open_router_1_1_message_generator_open_router">MessageGeneratorOpenRouter</link>()</para>
</listitem>
            <listitem><para>dict <link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1ab5359c63c972052f22645b0d60df5c38">characters</link> = {}</para>
</listitem>
        </itemizedlist>
</simplesect>
<section>
<title>Подробное описание</title>

<para>Класс, управляющий игровым процессом и взаимодействием с игроком </para>



<para>Отвечает за:<itemizedlist>
<listitem>
<para>Генерацию ответов на действия игрока</para>
</listitem><listitem>
<para>Управление игровыми персонажами</para>
</listitem><listitem>
<para>Поддержание целостности игрового мира</para>
</listitem><listitem>
<para>Генерацию изображений</para>
</listitem><listitem>
<para>Взаимодействие с базой данных</para>
</listitem></itemizedlist>
</para>

<para><note><title>Заметки</title>

<para>Реализует паттерн Singleton для обеспечения единой точки управления игровым процессом </para>
</note>
</para>
<para>
См. определение в файле <link linkend="__game_master_8py_source">GameMaster.py</link> строка <link linkend="__game_master_8py_source_1l00029">29</link></para>
</section>
<section>
<title>Конструктор(ы)</title>
<anchor xml:id="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1a3d4c57cdc4cd784782f1fdb024610892"/><section>
    <title>__init__()</title>
<indexterm><primary>__init__</primary><secondary>src.GameMaster.GameMaster.GameMaster</secondary></indexterm>
<indexterm><primary>src.GameMaster.GameMaster.GameMaster</primary><secondary>__init__</secondary></indexterm>
<para><computeroutput> None src.GameMaster.GameMaster.GameMaster.__init__ ( self, int session_id, Optional[str]  world_description = <computeroutput>None</computeroutput>
, Optional[str]  player_description = <computeroutput>None</computeroutput>
, bool  fast_flg = <computeroutput>True</computeroutput>
, str  language = <computeroutput>&quot;English&quot;</computeroutput>
, bool  generate_character_images = <computeroutput>True</computeroutput>
)</computeroutput></para><para>

<para>Инициализация мастера игры </para>
</para>

<para>
                <formalpara>
                    <title>
Аргументы</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>session_id</entry><entry>
<para>ID игровой сессии </para>
</entry>
                            </row>
                            <row>
<entry>world_description</entry><entry>
<para>Описание игрового мира (опционально) </para>
</entry>
                            </row>
                            <row>
<entry>player_description</entry><entry>
<para>Описание игрового персонажа (опционально) </para>
</entry>
                            </row>
                            <row>
<entry>fast_flg</entry><entry>
<para>Флаг быстрого режима (опционально) </para>
</entry>
                            </row>
                            <row>
<entry>language</entry><entry>
<para>Язык игры (опционально) </para>
</entry>
                            </row>
                            <row>
<entry>generate_character_images</entry><entry>
<para>Флаг генерации изображений персонажей (опционально) </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                </para>
<para>
См. определение в файле <link linkend="__game_master_8py_source">GameMaster.py</link> строка <link linkend="__game_master_8py_source_1l00043">43</link></para>
</section>
</section>
<section>
<title>Методы</title>
<anchor xml:id="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1ada31cf2e334f400a557e5cef5cfd4035"/><section>
    <title>generate_answer()</title>
<indexterm><primary>generate_answer</primary><secondary>src.GameMaster.GameMaster.GameMaster</secondary></indexterm>
<indexterm><primary>src.GameMaster.GameMaster.GameMaster</primary><secondary>generate_answer</secondary></indexterm>
<para><computeroutput> str src.GameMaster.GameMaster.GameMaster.generate_answer ( self, str message)</computeroutput></para><para>

<para>Генерация ответа на сообщение игрока </para>
</para>

<para>
                <formalpara>
                    <title>
Аргументы</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>message</entry><entry>
<para>Сообщение игрока</para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                <formalpara><title>Возвращает</title>

<para>str Ответ системы</para>
</formalpara>

                <formalpara>
                    <title>
Исключения</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry><link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_player_death_exception">PlayerDeathException</link></entry><entry>
<para>если игровой персонаж умирает </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                </para>
<para>
См. определение в файле <link linkend="__game_master_8py_source">GameMaster.py</link> строка <link linkend="__game_master_8py_source_1l00139">139</link></para>
</section>
<anchor xml:id="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1af4b0a20324399ffd65811c0d5a7e72fb"/><section>
    <title>generate_instruction()</title>
<indexterm><primary>generate_instruction</primary><secondary>src.GameMaster.GameMaster.GameMaster</secondary></indexterm>
<indexterm><primary>src.GameMaster.GameMaster.GameMaster</primary><secondary>generate_instruction</secondary></indexterm>
<para><computeroutput> Tuple[List[<link linkend="_classsrc_1_1_game_master_1_1_command_data_1_1_command_data">CommandData</link>], str] src.GameMaster.GameMaster.GameMaster.generate_instruction ( self, str message)</computeroutput></para><para>

<para>Генерация инструкций на основе сообщения </para>
</para>

<para>
                <formalpara>
                    <title>
Аргументы</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>message</entry><entry>
<para>Сообщение для обработки</para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                <formalpara><title>Возвращает</title>

<para>Tuple[List[<link linkend="_classsrc_1_1_game_master_1_1_command_data_1_1_command_data">CommandData</link>], str] Кортеж из списка команд и текстового вывода</para>
</formalpara>
<note><title>Заметки</title>

<para>Метод может выполнять повторные попытки генерации при некорректном формате </para>
</note>
</para>
<para>
См. определение в файле <link linkend="__game_master_8py_source">GameMaster.py</link> строка <link linkend="__game_master_8py_source_1l00188">188</link></para>
</section>
<anchor xml:id="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1a7f51c99f6a3adafdebc200086a1e71f2"/><section>
    <title>parse_commands()</title>
<indexterm><primary>parse_commands</primary><secondary>src.GameMaster.GameMaster.GameMaster</secondary></indexterm>
<indexterm><primary>src.GameMaster.GameMaster.GameMaster</primary><secondary>parse_commands</secondary></indexterm>
<para><computeroutput> Tuple[str, Set[str]] src.GameMaster.GameMaster.GameMaster.parse_commands ( self, List[<link linkend="_classsrc_1_1_game_master_1_1_command_data_1_1_command_data">CommandData</link>] commands)</computeroutput></para><para>

<para>Обработка списка команд </para>
</para>

<para>
                <formalpara>
                    <title>
Аргументы</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>commands</entry><entry>
<para>Список команд для обработки</para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                <formalpara><title>Возвращает</title>

<para>Tuple[str, Set[str]] Кортеж из текстового вывода и множества имен активных персонажей</para>
</formalpara>

                <formalpara>
                    <title>
Исключения</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry><link linkend="_classsrc_1_1_game_master_1_1_game_master_1_1_player_death_exception">PlayerDeathException</link></entry><entry>
<para>если встречена команда смерти игрока </para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                </para>
<para>
См. определение в файле <link linkend="__game_master_8py_source">GameMaster.py</link> строка <link linkend="__game_master_8py_source_1l00279">279</link></para>
</section>
<anchor xml:id="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1aa80e8c47e27990d55aeb45ddf7512f05"/><section>
    <title>validate_and_parse()</title>
<indexterm><primary>validate_and_parse</primary><secondary>src.GameMaster.GameMaster.GameMaster</secondary></indexterm>
<indexterm><primary>src.GameMaster.GameMaster.GameMaster</primary><secondary>validate_and_parse</secondary></indexterm>
<para><computeroutput> Tuple[Optional[List[<link linkend="_classsrc_1_1_game_master_1_1_command_data_1_1_command_data">CommandData</link>]], str] src.GameMaster.GameMaster.GameMaster.validate_and_parse ( self, str input_text)</computeroutput></para><para>

<para>Валидация и парсинг входного текста </para>
</para>

<para>
                <formalpara>
                    <title>
Аргументы</title>
                    <para>
                    <table frame="all">
                        <tgroup cols="2" align="left" colsep="1" rowsep="1">
                        <colspec colwidth="1*"/>
                        <colspec colwidth="4*"/>
                        <tbody>
                            <row>
<entry>input_text</entry><entry>
<para>Текст для валидации и парсинга</para>
</entry>
                            </row>
                        </tbody>
                        </tgroup>
                    </table>
                    </para>
                </formalpara>
                <formalpara><title>Возвращает</title>

<para>Tuple[Optional[List[<link linkend="_classsrc_1_1_game_master_1_1_command_data_1_1_command_data">CommandData</link>]], str] Кортеж из списка команд (или None) и сообщения об ошибке </para>
</formalpara>
</para>
<para>
См. определение в файле <link linkend="__game_master_8py_source">GameMaster.py</link> строка <link linkend="__game_master_8py_source_1l00209">209</link></para>
</section>
</section>
<section>
<title>Данные класса</title>
<anchor xml:id="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1ab5359c63c972052f22645b0d60df5c38"/><section>
    <title>characters</title>
<indexterm><primary>characters</primary><secondary>src.GameMaster.GameMaster.GameMaster</secondary></indexterm>
<indexterm><primary>src.GameMaster.GameMaster.GameMaster</primary><secondary>characters</secondary></indexterm>
<para><computeroutput>dict src.GameMaster.GameMaster.GameMaster.characters = {}</computeroutput></para><para>
См. определение в файле <link linkend="__game_master_8py_source">GameMaster.py</link> строка <link linkend="__game_master_8py_source_1l00070">70</link></para>
</section>
<anchor xml:id="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1a7fcc819f6b191473b29534ab67576211"/><section>
    <title>db</title>
<indexterm><primary>db</primary><secondary>src.GameMaster.GameMaster.GameMaster</secondary></indexterm>
<indexterm><primary>src.GameMaster.GameMaster.GameMaster</primary><secondary>db</secondary></indexterm>
<para><computeroutput>src.GameMaster.GameMaster.GameMaster.db = <link linkend="_classsrc_1_1_database_manager_1_1_database_manager_1_1_database_manager">DatabaseManager</link>()</computeroutput></para><para>
См. определение в файле <link linkend="__game_master_8py_source">GameMaster.py</link> строка <link linkend="__game_master_8py_source_1l00058">58</link></para>
</section>
<anchor xml:id="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1ab19b9e393d293c94e4643cd32c67d0dd"/><section>
    <title>generate_character_images</title>
<indexterm><primary>generate_character_images</primary><secondary>src.GameMaster.GameMaster.GameMaster</secondary></indexterm>
<indexterm><primary>src.GameMaster.GameMaster.GameMaster</primary><secondary>generate_character_images</secondary></indexterm>
<para><computeroutput>src.GameMaster.GameMaster.GameMaster.generate_character_images = generate_character_images</computeroutput></para><para>
См. определение в файле <link linkend="__game_master_8py_source">GameMaster.py</link> строка <link linkend="__game_master_8py_source_1l00059">59</link></para>
</section>
<anchor xml:id="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1aedb06b2bcc0533a886a217a19735151d"/><section>
    <title>messageGenerator</title>
<indexterm><primary>messageGenerator</primary><secondary>src.GameMaster.GameMaster.GameMaster</secondary></indexterm>
<indexterm><primary>src.GameMaster.GameMaster.GameMaster</primary><secondary>messageGenerator</secondary></indexterm>
<para><computeroutput><link linkend="_classsrc_1_1_message_generator_1_1_protocol_message_generator_1_1_protocol_message_generator">ProtocolMessageGenerator</link> src.GameMaster.GameMaster.GameMaster.messageGenerator = <link linkend="_classsrc_1_1_message_generator_1_1_message_generator_open_router_1_1_message_generator_open_router">MessageGeneratorOpenRouter</link>()</computeroutput></para><para>
См. определение в файле <link linkend="__game_master_8py_source">GameMaster.py</link> строка <link linkend="__game_master_8py_source_1l00069">69</link></para>
</section>
<anchor xml:id="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1a0bb1f23554cf5091cf4bffb1641d9be6"/><section>
    <title>player_description</title>
<indexterm><primary>player_description</primary><secondary>src.GameMaster.GameMaster.GameMaster</secondary></indexterm>
<indexterm><primary>src.GameMaster.GameMaster.GameMaster</primary><secondary>player_description</secondary></indexterm>
<para><computeroutput>src.GameMaster.GameMaster.GameMaster.player_description = player_description</computeroutput></para><para>
См. определение в файле <link linkend="__game_master_8py_source">GameMaster.py</link> строка <link linkend="__game_master_8py_source_1l00067">67</link></para>
</section>
<anchor xml:id="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1a163bdf238c24c30500cb4d758cd25b31"/><section>
    <title>session_id</title>
<indexterm><primary>session_id</primary><secondary>src.GameMaster.GameMaster.GameMaster</secondary></indexterm>
<indexterm><primary>src.GameMaster.GameMaster.GameMaster</primary><secondary>session_id</secondary></indexterm>
<para><computeroutput>src.GameMaster.GameMaster.GameMaster.session_id = session_id</computeroutput></para><para>
См. определение в файле <link linkend="__game_master_8py_source">GameMaster.py</link> строка <link linkend="__game_master_8py_source_1l00057">57</link></para>
</section>
<anchor xml:id="_classsrc_1_1_game_master_1_1_game_master_1_1_game_master_1aaebaf89191e3696ae060994b3cbd85bd"/><section>
    <title>world_description</title>
<indexterm><primary>world_description</primary><secondary>src.GameMaster.GameMaster.GameMaster</secondary></indexterm>
<indexterm><primary>src.GameMaster.GameMaster.GameMaster</primary><secondary>world_description</secondary></indexterm>
<para><computeroutput>src.GameMaster.GameMaster.GameMaster.world_description = world_description</computeroutput></para><para>
См. определение в файле <link linkend="__game_master_8py_source">GameMaster.py</link> строка <link linkend="__game_master_8py_source_1l00066">66</link></para>
</section>
<para>
Объявления и описания членов класса находятся в файле:</para>
C:/Users/kir/Desktop/py/API/src/GameMaster/GameMaster.py</section>
</section>
